---
// CORREÇÃO: Usamos ../../ aqui também
import Layout from '../../layouts/Layout.astro';
import Sidebar from '../../components/Sidebar.astro';

export async function getStaticPaths() {
  return [
    { params: { category: 'brasileirao', subcategory: 'pre-jogo' }, props: { name: 'Pré Jogo' } },
    { params: { category: 'brasileirao', subcategory: 'analises' }, props: { name: 'Bola Cheia / Bola Murcha' } },
    { params: { category: 'brasileirao', subcategory: 'ultimas' }, props: { name: 'Últimas do Brasileirão' } },
    { params: { category: 'so-lendas', subcategory: 'craques' }, props: { name: 'Craques do Passado' } },
    { params: { category: 'so-lendas', subcategory: 'curiosidades' }, props: { name: 'Curiosidades Históricas' } },
    { params: { category: 'olho-no-lance', subcategory: 'tatica' }, props: { name: 'Formação Tática' } },
    { params: { category: 'olho-no-lance', subcategory: 'entendendo' }, props: { name: 'Entendendo o Futebol' } },
  ];
}

const { category, subcategory } = Astro.params;
const { name } = Astro.props;

const posts = [1, 2, 3, 4].map((i) => ({
    title: `Notícia sobre ${name} #${i}`,
    excerpt: "Análise completa sobre o tema com detalhes táticos.",
    image: `https://images.unsplash.com/photo-1579952363873-27f3bade9f55?q=80&w=600&auto=format&fit=crop&random=${i}`,
    slug: "falso-9" // Linkando para um post que existe
}));
---

<Layout title={`${name} | ${category}`}>
    <div class="py-12 mb-8 border-b border-white/5 bg-bj-surface/30">
        <div class="max-w-7xl mx-auto px-4">
            <div class="flex items-center gap-2 text-xs text-bj-dim uppercase tracking-wider mb-2">
                <a href={`/${category}`} class="hover:text-bj-neon">{category}</a>
                <span>/</span>
                <span class="text-bj-neon">{name}</span>
            </div>
            <h1 class="text-4xl md:text-5xl font-heading font-bold text-bj-white uppercase">
                {name}
            </h1>
        </div>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-12 gap-12 max-w-7xl mx-auto px-4">
        <div class="lg:col-span-8 space-y-8">
            {posts.map((post) => (
                <article class="flex flex-col md:flex-row gap-6 bg-bj-surface border border-white/5 p-4 rounded-sm hover:border-bj-neon/30 transition-colors group">
                    <a href={`/posts/${post.slug}`} class="w-full md:w-1/3 aspect-video overflow-hidden">
                            <img src={post.image} alt={post.title} class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105" />
                    </a>
                    <div class="flex-1 flex flex-col justify-center">
                        <span class="text-bj-neon text-xs font-bold uppercase mb-2">{name}</span>
                        <h2 class="text-xl font-heading font-bold text-bj-white leading-tight mb-3 group-hover:text-bj-neon transition-colors">
                            <a href={`/posts/${post.slug}`}>{post.title}</a>
                        </h2>
                        <p class="text-bj-dim text-sm mb-4">{post.excerpt}</p>
                    </div>
                </article>
            ))}
        </div>
        <aside class="lg:col-span-4">
            <Sidebar />
        </aside>
    </div>
</Layout>